var ee=Object.defineProperty,te=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var Y=(e,t,a)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))ne.call(t,a)&&Y(e,a,t[a]);if(U)for(var a of U(t))se.call(t,a)&&Y(e,a,t[a]);return e},I=(e,t)=>te(e,ae(t));import{u as M,b as H,o as oe}from"./vue-router.636c4d32.js";import{_ as $,M as re}from"./index.9fb0a22d.js";import{k as p,l as b,p as l,n as G,ad as le,ae as ie,O as ce,d as k,f as L,o as P,J as V,N as u,a8 as g,F as j,m,X as J,af as w,x as O,ag as T,s as A,Y as B,h as C,ah as R,ai as z,a6 as de,M as D,u as S,r as X,g as ue,j as pe,w as _e,a4 as me}from"./@vue.1f834f0a.js";import{u as E}from"./vuex.6730d146.js";import"./dayjs.a4bdb7c5.js";import"./element-plus.25609939.js";import"./lodash.c1ac35c2.js";import"./resize-observer-polyfill.8deb1e21.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.d8e3ba72.js";import"./@popperjs.a8a4a6a0.js";import"./async-validator.1fa0d626.js";import"./particles.vue3.215b8b04.js";import"./vue-class-component.b52a4e7f.js";import"./tsparticles.8e768620.js";function N(e){return/^(https?:|mailto:|tel:)/.test(e)}const fe={props:{to:{type:String,required:!0}},computed:{isExternal(){return N(this.to)},type(){return this.isExternal?"a":"router-link"}},methods:{linkProps(e){return this.isExternal?{href:e,target:"_blank",rel:"noopener"}:{to:e}}}};function he(e,t,a,i,_,n){return p(),b(ce(n.type),le(ie(n.linkProps(a.to))),{default:l(()=>[G(e.$slots,"default")]),_:3},16)}var ve=$(fe,[["render",he]]);const ge=k({name:"SidebarItem",components:{AppLink:ve},props:{item:{type:Object,default:()=>{}},isNest:{type:Boolean,default:!1},basePath:{type:String,default:""}},setup(e){const t=L({onlyOneChild:null});function a(_=[],n){const s=_.filter(c=>{let r=!1;return c&&c.hidden?r=!1:(t.onlyOneChild=c,r=!0),r});return s.length===1?!0:s.length===0?(t.onlyOneChild=I(y({},n),{noShowingChildren:!0}),!0):!1}function i(_){return N(_)?_:N(e.basePath)?e.basePath:_}return P(()=>{}),y({resolvePath:i,hasOneShowingChild:a},V(t))}}),be={key:0};function we(e,t,a,i,_,n){const s=u("el-menu-item"),c=u("app-link"),r=u("sidebar-item",!0),v=u("el-submenu");return e.item.hidden?A("",!0):(p(),g("div",be,[e.hasOneShowingChild(e.item.children,e.item)&&(!e.onlyOneChild.children||e.onlyOneChild.noShowingChildren)&&!e.item.alwaysShow?(p(),g(j,{key:0},[e.onlyOneChild.meta?(p(),b(c,{key:0,to:e.resolvePath(e.onlyOneChild.path)},{default:l(()=>[m(s,{index:e.resolvePath(e.onlyOneChild.path),class:T({"submenu-title-noDropdown":!e.isNest})},J({default:l(()=>[w("i",{class:T([e.onlyOneChild.meta.icon||e.item.meta&&e.item.meta.icon,"sub-el-icon"])},null,2)]),_:2},[e.item.meta?{name:"title",fn:l(()=>[w("span",null,O(e.onlyOneChild.meta.title),1)])}:void 0]),1032,["index","class"])]),_:1},8,["to"])):A("",!0)],64)):(p(),b(v,{key:1,ref:"subMenu",index:e.resolvePath(e.item.path),"popper-append-to-body":""},J({default:l(()=>[(p(!0),g(j,null,B(e.item.children,o=>(p(),b(r,{key:e.item.path+"/"+o.path,"is-nest":!0,item:o,"base-path":e.resolvePath(e.item.path+"/"+o.path),class:"nest-menu"},null,8,["item","base-path"]))),128))]),_:2},[e.item.meta?{name:"title",fn:l(()=>[w("i",{class:T([e.item.meta.icon,"sub-el-icon"])},null,2),w("span",null,O(e.item.meta.title),1)])}:void 0]),1032,["index"]))]))}var $e=$(ge,[["render",we]]);const ye=k({name:"Home",components:{sidebarItem:$e},setup:()=>{const e=E(),t=M(),a=H(),i=C(()=>{const{meta:s,path:c}=a;return s.activeMenu?s.activeMenu:c}),_=C(()=>{const s=[];return t.options.routes.forEach(c=>{c.path=="/"&&s.push(...c.children)}),s}),n=C(()=>!e.getters["layout/sidebar"].opened);return P(()=>{}),{router:t,activeMenu:i,permission_routes:_,isCollapse:n}}});function ke(e,t,a,i,_,n){const s=u("sidebar-item"),c=u("el-menu");return p(),b(c,{"default-active":e.activeMenu,collapse:e.isCollapse,"unique-opened":!1,"collapse-transition":!1,mode:"vertical","text-color":"#fff","background-color":"#515a6e","active-text-color":"#ffd04b"},{default:l(()=>[(p(!0),g(j,null,B(e.permission_routes,r=>(p(),b(s,{key:r.path,item:r,"base-path":r.path},null,8,["item","base-path"]))),128))]),_:1},8,["default-active","collapse"])}var Ce=$(ye,[["render",ke]]);const Se=k({name:"Hamburger",props:{isActive:{type:Number,default:0}},setup:(e,t)=>{function a(){t.emit("toggleClick")}return{toggleClick:a}}}),Te=e=>(R("data-v-02c13d35"),e=e(),z(),e),Le=Te(()=>w("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)),Pe=[Le];function Ve(e,t,a,i,_,n){return p(),g("div",{style:{padding:"0 15px"},onClick:t[0]||(t[0]=(...s)=>e.toggleClick&&e.toggleClick(...s))},[(p(),g("svg",{class:T([{"is-active":e.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},Pe,2))])}var je=$(Se,[["render",Ve],["__scopeId","data-v-02c13d35"]]);const Oe=k({name:"Breadcrumb",setup:()=>{const e=L({levelList:null});oe(n=>{n.path.startsWith("/redirect/")||a(n)}),P(()=>{a(t.currentRoute.value)});const t=M(),a=n=>{let s=n.matched.filter(r=>r.meta&&r.meta.title);const c=s[0];i(c)||(s=[{path:"/dashboard",meta:{title:"\u9996\u9875"}}].concat(s)),e.levelList=s.filter(r=>r.meta&&r.meta.title&&r.meta.breadcrumb!==!1)},i=n=>{const s=n&&n.name;return s?s.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase():!1},_=n=>{const{redirect:s,path:c}=n;if(s){t.push(s);return}t.push(c)};return I(y({},V(e)),{handleLink:_})}}),Me={key:0,class:"no-redirect"},Ae=["onClick"];function Be(e,t,a,i,_,n){const s=u("el-breadcrumb-item"),c=u("el-breadcrumb");return p(),b(c,{class:"app-breadcrumb",separator:"/"},{default:l(()=>[m(de,{name:"breadcrumb"},{default:l(()=>[(p(!0),g(j,null,B(e.levelList,(r,v)=>(p(),b(s,{key:r.path},{default:l(()=>[r.redirect==="noRedirect"||v==e.levelList.length-1?(p(),g("span",Me,O(r.meta.title),1)):(p(),g("a",{key:1,onClick:D(o=>e.handleLink(r),["prevent"])},O(r.meta.title),9,Ae))]),_:2},1024))),128))]),_:1})]),_:1})}var De=$(Oe,[["render",Be],["__scopeId","data-v-7b04a6f2"]]);const Ee=k({components:{Hamburger:je,Breadcrumb:De},setup(){const e=E(),t=H(),a=M(),i=()=>{e.dispatch("layout/toggleSideBar")};return{sidebar:C(()=>e.getters["layout/sidebar"]),logout:()=>{a.push(`/login?redirect=${t.fullPath}`).catch(s=>{console.warn(s)})},toggleSideBar:i}}}),K=e=>(R("data-v-7d5ab5c0"),e=e(),z(),e),Ie={class:"navbar"},He={class:"right-menu"},Re=K(()=>w("div",{class:"avatar-wrapper"},[w("img",{src:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/80/h/80",class:"user-avatar"})],-1)),ze=S(" \u94FE\u63A51 "),Ne={target:"_blank",href:"https://github.com/rcyj-FED/vue3-composition-admin"},We=S(" \u94FE\u63A52 "),Fe=K(()=>w("span",{style:{display:"block"}}," \u767B\u51FA ",-1));function xe(e,t,a,i,_,n){const s=u("hamburger"),c=u("breadcrumb"),r=u("el-dropdown-item"),v=u("router-link"),o=u("el-dropdown-menu"),f=u("el-dropdown");return p(),g("div",Ie,[m(s,{id:"hamburger-container","is-active":e.sidebar.opened,class:"hamburger-container",onToggleClick:e.toggleSideBar},null,8,["is-active","onToggleClick"]),m(c,{id:"breadcrumb-container",class:"breadcrumb-container"}),w("div",He,[m(f,{class:"avatar-container right-menu-item hover-effect",trigger:"click"},{dropdown:l(()=>[m(o,null,{default:l(()=>[m(v,{to:"/"},{default:l(()=>[m(r,null,{default:l(()=>[ze]),_:1})]),_:1}),w("a",Ne,[m(r,null,{default:l(()=>[We]),_:1})]),m(r,{divided:"",onClick:e.logout},{default:l(()=>[Fe]),_:1},8,["onClick"])]),_:1})]),default:l(()=>[Re]),_:1})])])}var qe=$(Ee,[["render",xe],["__scopeId","data-v-7d5ab5c0"]]);const Ue=k({emits:["scroll"],setup(e,t){const a=X(null),i=C(()=>a.value.$refs.wrap),{ctx:_}=ue(),n=4,s=L({handleScroll:r=>{const v=r.wheelDelta||-r.deltaY*40;i.value.scrollLeft=i.value.scrollLeft+v/4},moveToCurrentTag:r=>{const o=a.value.$el.offsetWidth,f=_.$parent.$refs.tag;let d=null,h=null;if(f.length>0&&(d=f[0],h=f[f.length-1]),d===r)i.value.scrollLeft=0;else if(h===r)i.value.scrollLeft=i.value.scrollWidth-o;else{const W=f.findIndex(Z=>Z===r),Q=f[W-1],F=f[W+1],x=F.$el.offsetLeft+F.$el.offsetWidth+n,q=Q.$el.offsetLeft-n;x>i.value.scrollLeft+o?i.value.scrollLeft=x-o:q<i.value.scrollLeft&&(i.value.scrollLeft=q)}}}),c=()=>{t.emit("scroll")};return P(()=>{i.value.addEventListener("scroll",c,!0)}),pe(()=>{i.value.removeEventListener("scroll",c)}),y({scrollContainerRef:a},V(s))}});function Ye(e,t,a,i,_,n){const s=u("el-scrollbar");return p(),b(s,{ref:"scrollContainerRef",class:"scroll-container",onWheel:D(e.handleScroll,["prevent"])},{default:l(()=>[G(e.$slots,"default",{},void 0,!0)]),_:3},8,["onWheel"])}var Ge=$(Ue,[["render",Ye],["__scopeId","data-v-60e9b5c0"]]);const Je=k({components:{ScrollPane:Ge},setup(){const e=E(),t=M(),a=H(),i=X(null),_=(o,f)=>{const d=o.slice(-1)[0];d!==void 0&&d.fullPath!==void 0?t.push(d.fullPath).catch(h=>{console.warn(h)}):f.name==="Dashboard"?t.push({path:f.fullPath}).catch(h=>{console.warn(h)}):t.push("/").catch(h=>{console.warn(h)})},n=L({visible:!1,top:0,left:0,selectedTag:{fullPath:"",path:"",name:"",meta:{}},affixTags:[],isActive:o=>o.path===a.path,isAffix:o=>o.meta&&o.meta.affix,closeSelectedTag:o=>{o.name!=="Dashboard"&&(e.dispatch("tagViews/delView",o),n.isActive(o)&&_(e.state.tagViews.visitedViews,o))},closeSelectedOtherTag:o=>{o.fullPath!==a.path&&o.fullPath!==void 0&&t.push(o.fullPath).catch(f=>{console.log(f)}),e.dispatch("tagViews/delOthersViews",o)},closeSelectedAllTag:()=>{e.dispatch("tagViews/delAllViews",void 0),!n.affixTags.some(o=>o.path===a.path)&&_(e.state.tagViews.visitedViews,n.selectedTag)},handleTags:o=>{switch(o){case"now":n.closeSelectedTag(n.selectedTag);break;case"other":n.closeSelectedOtherTag(n.selectedTag);break;case"all":n.closeSelectedAllTag();break}}}),s=C(()=>e.state.tagViews.visitedViews),c=o=>{let f=[];return o.forEach(d=>{if(d.meta&&d.meta.affix){const h=d.path;f.push({fullPath:h,path:h,name:d.name,meta:y({},d.meta)})}if(d.children){const h=c(d.children,d.path);h.length>=1&&(f=f.concat(h))}}),f},r=()=>{n.affixTags=c(t.options.routes);for(const o of n.affixTags)o.name&&e.dispatch("tagViews/addVisitedView",o)},v=()=>(a.name&&e.dispatch("tagViews/addView",a),n.selectedTag=a,!1);return _e(()=>a.name,()=>{a.name!=="login"&&v()}),me(()=>{r(),v()}),y({visitedViews:s,scrollPaneRef:i},V(n))}}),Xe=e=>(R("data-v-17341c93"),e=e(),z(),e),Ke={id:"tags-view-container",class:"tags-view-container"},Qe=["onClick"],Ze={class:"tags-close-box"},et=S(" \u6807\u7B7E\u9009\u9879 "),tt=Xe(()=>w("i",{class:"el-icon-arrow-down el-icon--right"},null,-1)),at=S("\u5173\u95ED\u5F53\u524D"),nt=S("\u5173\u95ED\u5176\u4ED6"),st=S("\u5173\u95ED\u6240\u6709");function ot(e,t,a,i,_,n){const s=u("router-link"),c=u("ScrollPane"),r=u("el-button"),v=u("el-dropdown-item"),o=u("el-dropdown-menu"),f=u("el-dropdown");return p(),g("div",Ke,[m(c,{ref:"scrollPaneRef",class:"tags-view-wrapper"},{default:l(()=>[(p(!0),g(j,null,B(e.visitedViews,d=>(p(),b(s,{ref:"tag",key:d.path,class:T([e.isActive(d)?"active":"","tags-view-item"]),to:{path:d.path,query:d.query,fullPath:d.fullPath},tag:"span",onMouseup:D(h=>e.isAffix(d)?"":e.closeSelectedTag(d),["middle"])},{default:l(()=>[S(O(d.meta.title)+" ",1),!e.isAffix(d)&&d.name!=="Dashboard"?(p(),g("span",{key:0,class:"el-icon-close",onClick:D(h=>e.closeSelectedTag(d),["prevent","stop"])},null,8,Qe)):A("",!0)]),_:2},1032,["class","to","onMouseup"]))),128))]),_:1},512),w("div",Ze,[m(f,{onCommand:e.handleTags},{dropdown:l(()=>[m(o,{size:"small"},{default:l(()=>[e.selectedTag.name!=="Dashboard"?(p(),b(v,{key:0,command:"now"},{default:l(()=>[at]),_:1})):A("",!0),m(v,{command:"other"},{default:l(()=>[nt]),_:1}),m(v,{command:"all"},{default:l(()=>[st]),_:1})]),_:1})]),default:l(()=>[m(r,{size:"mini",type:"primary"},{default:l(()=>[et,tt]),_:1})]),_:1},8,["onCommand"])])])}var rt=$(Je,[["render",ot],["__scopeId","data-v-17341c93"]]);const lt=k({name:"Home",components:{Main:re,Menu:Ce,Header:qe,TagsView:rt},setup:()=>{const e=L({sidebar:{}}),t=E();e.sidebar=t.getters["layout/sidebar"];const a=C(()=>({hideSidebar:!e.sidebar.opened,openSidebar:e.sidebar.opened,withoutAnimation:e.sidebar.withoutAnimation}));return P(()=>{}),y({classObj:a},V(e))}});function it(e,t,a,i,_,n){const s=u("Menu"),c=u("el-aside"),r=u("Header"),v=u("TagsView"),o=u("el-header"),f=u("Main"),d=u("el-main"),h=u("el-container");return p(),b(h,{class:T([e.classObj,"app-wrapper"])},{default:l(()=>[m(c,{width:"200px",style:{background:"#515a6e"}},{default:l(()=>[m(s)]),_:1}),m(h,{class:"main-box"},{default:l(()=>[m(o,null,{default:l(()=>[m(r),m(v)]),_:1}),m(d,null,{default:l(()=>[m(f)]),_:1})]),_:1})]),_:1},8,["class"])}var St=$(lt,[["render",it],["__scopeId","data-v-e3162fd0"]]);export{St as default};
